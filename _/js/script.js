function init(){container=document.getElementById("canvas"),camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2e3),camera.position.z=250,scene=new THREE.Scene;var a=new THREE.AmbientLight(16777215);scene.add(a);var b=new THREE.DirectionalLight(16772829,2);b.position.set(0,0,10),scene.add(b);var c=new THREE.LoadingManager;c.onProgress=function(a,b,c){console.log(a,b,c)};var d=new THREE.Texture,e=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;console.log(Math.round(b,2)+"% downloaded")}},f=function(a){},g=new THREE.ImageLoader(c);g.load("textures/UV_Grid_Sm.jpg",function(a){d.image=a,d.needsUpdate=!0});var h=new THREE.PointLight(11190771,1,30);h.castShadow=!0,h.shadow.camera.near=1,h.shadow.camera.far=30,h.shadow.bias=.01,h.position.x-=30,h.position.y-=30,h.position.z-=30;var g=new THREE.OBJLoader(c);g.load("_/models/viper.obj",function(a){a.traverse(function(a){a instanceof THREE.Mesh&&(a.material.map=d)}),a.add(h),a.position.z=-30,scene.add(a)},e,f),renderer=new THREE.WebGLRenderer,renderer.setClearColor(16711680),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),container.addEventListener("click",onDocumentMouseMove,!1),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(a){gamerunning&&(ship.x=(a.clientX-windowHalfX)/2,ship.x>0?ship.x-=ship.x/2:ship.x+=Math.abs(ship.x)/2,ship.y=-((a.clientY-windowHalfY)/2),ship.y>0?ship.y-=ship.y/2:ship.y+=Math.abs(ship.y)/2)}function animate(){requestAnimationFrame(animate),render()}function render(){if("undefined"!=typeof scene.children[2]&&gamerunning){var a=scene.children[2],b=distance_to_point(a.position.x,a.position.y,ship.x,ship.y),c=ship.speed+b/1e4,d=.03;b>10?(a.position.x<ship.x-c?(a.position.x+=c,a.rotation.y<.5&&(a.rotation.y+=d)):a.position.x>ship.x+c&&(a.position.x-=c,a.rotation.y>-.5&&(a.rotation.y-=d)),a.position.y<ship.y-c?a.position.y+=c:a.position.y>ship.y+c&&(a.position.y-=c),distance_to_point(a.position.x,ship.y,ship.x,ship.y)<25&&(a.rotation.y>.02&&(a.rotation.y-=d+.02),a.rotation.y<-.02&&(a.rotation.y+=d+.02))):(a.rotation.y>.02&&(a.rotation.y-=d),a.rotation.y<-.02&&(a.rotation.y+=d))}renderer.render(scene,camera)}function distance_to_point(a,b,c,d){if(c>a)var e=c-a;else var e=a-c;if(d>b)var f=d-b;else var f=b-d;var g=f/e;return g=e+g}$(document).ready(function(){$("#ins").on("click",function(a){a.preventDefault(),$(".info .show").removeClass("show"),$("#_ins").addClass("show")}),$("#abo").on("click",function(a){a.preventDefault(),$(".info .show").removeClass("show"),$("#_abo").addClass("show")}),$("#pla").on("click",function(a){a.preventDefault(),$(".sfield").fadeOut("fast",function(){$(".info").fadeOut("fast",function(){$("#canvas").fadeIn("fast",function(){gamerunning=!0,$(".info .show").removeClass("show"),$("#main").addClass("show"),$(".top").addClass("show"),$(".pandc").addClass("show")})})})})});var container,camera,scene,renderer,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,ship={x:0,y:-80,speed:1,b:!1},gamerunning=!1;window.onload=function(){init(),animate()};